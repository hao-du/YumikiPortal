(function(n,t,i,r){r.moneyTrace={}})(window,document,jQuery,yumiki);
(function(n,t,i,r){r.moneyTrace.bank={showActiveText:"Show Active Bank",showInactiveText:"Show Inactive Bank",errorLogType:"",app:{},initBank:function(){r.moneyTrace.bank.app=angular.module("bank",["ui.bootstrap"])},initService:function(n,t,i){r.moneyTrace.bank.app.service("DataService",function(r){this.getBanks=function(t,i,u){return r.get(n,{params:{showInactive:t,currentPage:i,itemsPerPage:u}})};this.getBankByID=function(n){return r.get(t,{params:{bankID:n}})};this.save=function(n){return r.post(i,n)}})},initBankListController:function(){r.moneyTrace.bank.app.controller("bankController",function(n,t,i,u){n.inactiveButtonName=r.moneyTrace.bank.showInactiveText;n.isStatusChanged=!1;n.viewby=20;n.itemsPerPage=n.viewby;n.totalItems=0;n.currentPage=1;n.maxSize=5;n.showDialog=function(n){t.$broadcast("OnLoad",n)};t.$on("OnReloadData",function(){n.loadData()});n.loadData=function(){var t=!0;n.inactiveButtonName==r.moneyTrace.bank.showInactiveText&&(t=!1);n.isStatusChanged&&(t=!t);r.message.displayLoadingDialog(!0);u.getBanks(t,n.currentPage,n.itemsPerPage).then(function(t){n.banks=t.data.Records;n.currentPage=t.data.CurrentPage;n.totalItems=t.data.TotalItems;n.itemsPerPage=t.data.ItemsPerPage;n.isStatusChanged&&(n.inactiveButtonName=n.inactiveButtonName==r.moneyTrace.bank.showInactiveText?r.moneyTrace.bank.showActiveText:r.moneyTrace.bank.showInactiveText,n.isStatusChanged=!1);r.message.displayLoadingDialog(!1)},function(t){n.isStatusChanged=!1;r.message.displayLoadingDialog(!1);r.message.clientMessage(t.data,"",r.moneyTrace.bank.errorLogType)})};n.loadDataWithStatus=function(){n.isStatusChanged=!0;n.loadData()}})},initBankDialogController:function(n){r.moneyTrace.bank.app.controller("bankDialogController",function(t,u,f,e){t.bankID=undefined;t.isActiveCheckboxDisabled=!1;u.$on("OnLoad",function(n,u){i("#dlgBank").modal({backdrop:"static"});u!=undefined&&u!=null?(t.bankID=u,t.isActiveCheckboxDisabled=!1,t.dialogTitle="Edit Bank",r.message.displayLoadingDialog(!0),e.getBankByID(t.bankID).then(function(n){t.bank=n.data;r.message.displayLoadingDialog(!1)},function(n){r.message.displayLoadingDialog(!1);r.message.clientMessage(n.data,"",r.moneyTrace.bank.errorLogType)})):(t.dialogTitle="New Bank",t.isActiveCheckboxDisabled=!0,t.bank=t.resetBank())});t.resetBank=function(){return t.bankForm.$setPristine(),n};t.save=function(n){n&&(r.message.displayLoadingDialog(!0),e.save(t.bank).then(function(){t.bankID=undefined;i("#dlgBank").modal("hide");t.ReloadData()},function(n){r.message.displayLoadingDialog(!1);r.message.clientMessage(n.data,"",r.moneyTrace.bank.errorLogType)}))};t.ReloadData=function(){u.$broadcast("OnReloadData")}})}}})(window,document,jQuery,yumiki);
