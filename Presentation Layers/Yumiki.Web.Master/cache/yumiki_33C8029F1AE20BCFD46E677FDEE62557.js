(function(n,t,i,r){r.moneyTrace={}})(window,document,jQuery,yumiki);
(function(n,t,i,r){r.moneyTrace.bank={showActiveText:"Show Active Bank",showInactiveText:"Show Inactive Bank",errorLogType:"",initBank:function(n,t,i,u){var f=angular.module("bank",["ui.bootstrap"]);r.moneyTrace.bank.initService(f,t,i,u);r.moneyTrace.bank.initBankListController(f);r.moneyTrace.bank.initBankDialogController(f,n)},initService:function(n,t,i,r){n.service("DataService",function(n){this.getBanks=function(i,r,u){return n.get(t,{params:{showInactive:i,currentPage:r,itemsPerPage:u}})};this.getBankByID=function(t){return n.get(i,{params:{bankID:t}})};this.save=function(t){return n.post(r,t)}})},initBankListController:function(n){n.controller("bankController",function(n,t,i,u){n.inactiveButtonName=r.moneyTrace.bank.showInactiveText;n.isStatusChanged=!1;n.viewby=20;n.itemsPerPage=n.viewby;n.totalItems=0;n.currentPage=1;n.maxSize=5;n.showDialog=function(n){t.$broadcast("OnLoad",n)};t.$on("OnReloadData",function(){n.loadData()});n.loadData=function(){var t=!0;n.inactiveButtonName==r.moneyTrace.bank.showInactiveText&&(t=!1);n.isStatusChanged&&(t=!t);r.message.displayLoadingDialog(!0);u.getBanks(t,n.currentPage,n.itemsPerPage).then(function(t){n.banks=t.data.Records;n.currentPage=t.data.CurrentPage;n.totalItems=t.data.TotalItems;n.itemsPerPage=t.data.ItemsPerPage;n.isStatusChanged&&(n.inactiveButtonName=n.inactiveButtonName==r.moneyTrace.bank.showInactiveText?r.moneyTrace.bank.showActiveText:r.moneyTrace.bank.showInactiveText,n.isStatusChanged=!1);r.message.displayLoadingDialog(!1)},function(t){n.isStatusChanged=!1;r.message.displayLoadingDialog(!1);r.message.clientMessage(t.data,"",r.moneyTrace.bank.errorLogType)})};n.loadDataWithStatus=function(){n.isStatusChanged=!0;n.loadData()}})},initBankDialogController:function(n,t){n.controller("bankDialogController",function(n,u,f,e){n.bankID=undefined;n.isActiveCheckboxDisabled=!1;u.$on("OnLoad",function(t,u){i("#dlgBank").modal({backdrop:"static"});u!=undefined&&u!=null?(n.bankID=u,n.isActiveCheckboxDisabled=!1,n.dialogTitle="Edit Bank",r.message.displayLoadingDialog(!0),e.getBankByID(n.bankID).then(function(t){n.bank=t.data;r.message.displayLoadingDialog(!1)},function(n){r.message.displayLoadingDialog(!1);r.message.clientMessage(n.data,"",r.moneyTrace.bank.errorLogType)})):(n.dialogTitle="New Bank",n.isActiveCheckboxDisabled=!0,n.bank=n.resetBank())});n.resetBank=function(){return n.bankForm.$setPristine(),t};n.save=function(t){t&&(r.message.displayLoadingDialog(!0),e.save(n.bank).then(function(){n.bankID=undefined;i("#dlgBank").modal("hide");n.ReloadData()},function(n){r.message.displayLoadingDialog(!1);r.message.clientMessage(n.data,"",r.moneyTrace.bank.errorLogType)}))};n.ReloadData=function(){u.$broadcast("OnReloadData")}})}}})(window,document,jQuery,yumiki);
