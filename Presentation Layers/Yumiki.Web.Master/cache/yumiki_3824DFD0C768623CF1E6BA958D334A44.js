(function(n,t,i,r){r.moneyTrace={}})(window,document,jQuery,yumiki);
(function(n,t,i,r){r.moneyTrace.currency={showActiveText:"Show Active Currency",showInactiveText:"Show Inactive Currency",errorLogType:"",initCurrency:function(n,t,i,u){var f=angular.module("currency",["ui.bootstrap"]);r.moneyTrace.currency.initService(f,t,i,u);r.moneyTrace.currency.initCurrencyListController(f);r.moneyTrace.currency.initCurrencyDialogController(f,n)},initService:function(n,t,i,r){n.service("DataService",function(n){this.getCurrencyList=function(i){return n.get(t,{params:{showInactive:i}})};this.getCurrencyByID=function(t){return n.get(i,{params:{currencyID:t}})};this.save=function(t){return n.post(r,t)}})},initCurrencyListController:function(n){n.controller("currencyController",function(n,t,i,u){n.inactiveButtonName=r.moneyTrace.currency.showInactiveText;n.isStatusChanged=!1;n.showDialog=function(n){t.$broadcast("OnLoad",n)};t.$on("OnReloadData",function(){n.loadData()});n.loadData=function(){var t=!0;n.inactiveButtonName==r.moneyTrace.currency.showInactiveText&&(t=!1);n.isStatusChanged&&(t=!t);r.message.displayLoadingDialog(!0);u.getCurrencyList(t).then(function(t){n.currencyList=t.data;n.isStatusChanged&&(n.inactiveButtonName=n.inactiveButtonName==r.moneyTrace.currency.showInactiveText?r.moneyTrace.currency.showActiveText:r.moneyTrace.currency.showInactiveText,n.isStatusChanged=!1);r.message.displayLoadingDialog(!1)},function(t){n.isStatusChanged=!1;r.message.displayLoadingDialog(!1);r.message.clientMessage(t.data,"",r.moneyTrace.currency.errorLogType)})};n.loadDataWithStatus=function(){n.isStatusChanged=!0;n.loadData()}})},initCurrencyDialogController:function(n,t){n.controller("currencyDialogController",function(n,u,f,e){n.currencyID=undefined;n.isActiveDisabled=!1;u.$on("OnLoad",function(t,u){i("#dlgCurrency").modal({backdrop:"static"});u!=undefined&&u!=null?(n.currencyID=u,n.isActiveDisabled=!1,n.dialogTitle="Edit Currency",r.message.displayLoadingDialog(!0),e.getCurrencyByID(n.currencyID).then(function(t){n.currency=t.data;r.message.displayLoadingDialog(!1)},function(n){r.message.displayLoadingDialog(!1);r.message.clientMessage(n.data,"",r.moneyTrace.currency.errorLogType)})):(n.dialogTitle="New Currency",n.isActiveDisabled=!0,n.currency=n.resetCurrency())});n.resetCurrency=function(){return n.currencyForm.$setPristine(),t};n.save=function(t){t&&(r.message.displayLoadingDialog(!0),e.save(n.currency).then(function(){n.currencyID=undefined;i("#dlgCurrency").modal("hide");n.ReloadData()},function(n){r.message.displayLoadingDialog(!1);r.message.clientMessage(n.data,"",r.moneyTrace.currency.errorLogType)}))};n.ReloadData=function(){u.$broadcast("OnReloadData")}})}}})(window,document,jQuery,yumiki);
