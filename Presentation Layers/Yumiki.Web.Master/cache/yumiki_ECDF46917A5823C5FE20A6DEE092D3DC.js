(function(c,b,a,d){d.moneyTrace={}}(window,document,jQuery,yumiki));
(function(c,b,a,d){d.moneyTrace.bank={showActiveText:"Show Active Bank",showInactiveText:"Show Inactive Bank",errorLogType:"",initBank:function(f,h,i,j,g){var e=angular.module("bank",["ui.bootstrap"]);d.moneyTrace.bank.initService(e,h,i,j);d.moneyTrace.bank.initBankListController(e);d.moneyTrace.bank.initBankDialogController(e,f)},initService:function(e,f,g,h){e.service("DataService",function(i){this.getBanks=function(l,j,k){return i.get(f,{params:{showInactive:l,currentPage:j,itemsPerPage:k}})};this.getBankByID=function(j){return i.get(g,{params:{bankID:j}})};this.save=function(j){return i.post(h,j)}})},initBankListController:function(e){e.controller("bankController",function(h,g,f,i){h.inactiveButtonName=d.moneyTrace.bank.showInactiveText;h.isStatusChanged=false;h.viewby=20;h.itemsPerPage=h.viewby;h.totalItems=0;h.currentPage=1;h.maxSize=5;h.showDialog=function(j){g.$broadcast("OnLoad",j)};g.$on("OnReloadData",function(j){h.loadData()});h.loadData=function(){var l=true;if(h.inactiveButtonName==d.moneyTrace.bank.showInactiveText){l=false}if(h.isStatusChanged){l=!l}d.message.displayLoadingDialog(true);i.getBanks(l,h.currentPage,h.itemsPerPage).then(function k(m){h.banks=m.data.Records;h.currentPage=m.data.CurrentPage;h.totalItems=m.data.TotalItems;h.itemsPerPage=m.data.ItemsPerPage;if(h.isStatusChanged){if(h.inactiveButtonName==d.moneyTrace.bank.showInactiveText){h.inactiveButtonName=d.moneyTrace.bank.showActiveText}else{h.inactiveButtonName=d.moneyTrace.bank.showInactiveText}h.isStatusChanged=false}d.message.displayLoadingDialog(false)},function j(m){h.isStatusChanged=false;d.message.displayLoadingDialog(false);d.message.clientMessage(m.data,"",d.moneyTrace.bank.errorLogType)})};h.loadDataWithStatus=function(){h.isStatusChanged=true;h.loadData()}})},initBankDialogController:function(e,f){e.controller("bankDialogController",function(i,h,g,j){i.bankID=undefined;i.isActiveCheckboxDisabled=false;h.$on("OnLoad",function(l,k){a("#dlgBank").modal({backdrop:"static"});if(k!=undefined&&k!=null){i.bankID=k;i.isActiveCheckboxDisabled=false;i.dialogTitle="Edit Bank";d.message.displayLoadingDialog(true);j.getBankByID(i.bankID).then(function n(o){i.bank=o.data;d.message.displayLoadingDialog(false)},function m(o){d.message.displayLoadingDialog(false);d.message.clientMessage(o.data,"",d.moneyTrace.bank.errorLogType)})}else{i.dialogTitle="New Bank";i.isActiveCheckboxDisabled=true;i.bank=i.resetBank()}});i.resetBank=function(){i.bankForm.$setPristine();return f};i.save=function(k){if(k){d.message.displayLoadingDialog(true);j.save(i.bank).then(function m(n){i.bankID=undefined;a("#dlgBank").modal("hide");i.ReloadData()},function l(n){d.message.displayLoadingDialog(false);d.message.clientMessage(n.data,"",d.moneyTrace.bank.errorLogType)})}};i.ReloadData=function(){h.$broadcast("OnReloadData")}})}}}(window,document,jQuery,yumiki));
